# Testing Documentation ğŸ§ª

## CardioGuard Backend API - Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„

### ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª](#Ø£Ù†ÙˆØ§Ø¹-Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª)
3. [Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±](#Ù…ØªØ·Ù„Ø¨Ø§Øª-Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±)
4. [Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø§Øª](#Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª-Ø§Ù„ÙˆØ­Ø¯Ø§Øª)
5. [Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„](#Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª-Ø§Ù„ØªÙƒØ§Ù…Ù„)
6. [Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±](#Ø­Ø§Ù„Ø§Øª-Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±)
7. [ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª](#ØªØ´ØºÙŠÙ„-Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª)
8. [ØªØºØ·ÙŠØ© Ø§Ù„ÙƒÙˆØ¯](#ØªØºØ·ÙŠØ©-Ø§Ù„ÙƒÙˆØ¯)

---

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ ÙŠÙˆÙØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø´Ø§Ù…Ù„Ø© Ø­ÙˆÙ„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ Backend API Ù„Ù†Ø¸Ø§Ù… CardioGuard.

### Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

- âœ… Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ
- âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ù‚Ø© Ø§Ù„ØªÙ†Ø¨Ø¤Ø§Øª
- âœ… Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- âœ… Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… Ù‚ÙŠØ§Ø³ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬

---

## Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

### 1. Unit Tests (Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø§Øª) âœ…

Ø§Ø®ØªØ¨Ø§Ø± ÙƒÙ„ Ù…ÙƒÙˆÙ† Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„:
- Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ (KNN, Naive Bayes, Decision Tree)
- Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙ†Ø¨Ø¤ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (PredictionService)
- ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø± (Risk Evaluation)

### 2. Integration Tests (Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„) âœ…

Ø§Ø®ØªØ¨Ø§Ø± ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ù…Ø¹Ø§Ù‹:
- API Controllers
- Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- Ù†Ø¸Ø§Ù… Ensemble

### 3. Manual Testing (Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙŠØ¯ÙˆÙŠ) âœ…

- Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø¨Ø± Swagger UI
- Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø¨Ø± Postman
- Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø¨Ø± cURL

---

## Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

### Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

```bash
# Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
dotnet add package xunit
dotnet add package Microsoft.NET.Test.Sdk
dotnet add package xunit.runner.visualstudio

# Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ù„Ù„ØªØºØ·ÙŠØ©
dotnet tool install --global coverlet.console
```

### Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

- Ù…Ù„Ù `heart_balanced.csv` ÙÙŠ Ù…Ø¬Ù„Ø¯ `Data/`
- Ø­Ø§Ù„Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø­Ø¯Ø¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹

---

## Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø§Øª

### 1. Ø§Ø®ØªØ¨Ø§Ø± KNN Model Service

**Ø§Ù„Ù…Ù„Ù:** `Tests/ModelServicesTests.cs`

#### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± 1: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬

```csharp
[Fact]
public void KNNModelService_ShouldLoadSuccessfully()
{
    // Arrange & Act
    var service = new KNNModelService();

    // Assert
    Assert.NotNull(service);
}
```

#### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± 2: Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø­Ø§Ù„Ø© Ù…Ø¹Ø±ÙˆÙØ© - Ø®Ø·Ø± Ù…Ù†Ø®ÙØ¶

```csharp
[Fact]
public void KNNModelService_LowRiskPatient_ShouldPredictNoDisease()
{
    // Arrange
    var service = new KNNModelService();
    var input = new HeartDiseaseData
    {
        Age = 30,
        Sex = 0,
        CP = 0,
        TrestBPS = 110,
        Chol = 180,
        FBS = 0,
        RestECG = 0,
        Thalach = 170,
        Exang = 0,
        Oldpeak = 0.0f,
        Slope = 1,
        CA = 0,
        Thal = 2
    };

    // Act
    var result = service.Predict(input);

    // Assert
    Assert.False(result.Prediction);
    Assert.True(result.Confidence < 30); // Ø®Ø·Ø± Ù…Ù†Ø®ÙØ¶
}
```

#### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± 3: Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø­Ø§Ù„Ø© Ù…Ø¹Ø±ÙˆÙØ© - Ø®Ø·Ø± Ù…Ø±ØªÙØ¹

```csharp
[Fact]
public void KNNModelService_HighRiskPatient_ShouldPredictDisease()
{
    // Arrange
    var service = new KNNModelService();
    var input = new HeartDiseaseData
    {
        Age = 65,
        Sex = 1,
        CP = 3,
        TrestBPS = 160,
        Chol = 300,
        FBS = 1,
        RestECG = 2,
        Thalach = 100,
        Exang = 1,
        Oldpeak = 3.0f,
        Slope = 2,
        CA = 3,
        Thal = 3
    };

    // Act
    var result = service.Predict(input);

    // Assert
    Assert.True(result.Prediction);
    Assert.True(result.Confidence > 70); // Ø®Ø·Ø± Ù…Ø±ØªÙØ¹
}
```

### 2. Ø§Ø®ØªØ¨Ø§Ø± Naive Bayes Model Service

```csharp
[Fact]
public void NaiveBayesModelService_ShouldPredictCorrectly()
{
    // Arrange
    var service = new NaiveBayesModelService();
    var input = new HeartDiseaseData
    {
        Age = 50,
        Sex = 1,
        CP = 1,
        TrestBPS = 130,
        Chol = 240,
        FBS = 0,
        RestECG = 0,
        Thalach = 150,
        Exang = 0,
        Oldpeak = 1.0f,
        Slope = 1,
        CA = 1,
        Thal = 2
    };

    // Act
    var result = service.Predict(input);

    // Assert
    Assert.NotNull(result);
    Assert.InRange(result.Confidence, 0, 100);
}
```

### 3. Ø§Ø®ØªØ¨Ø§Ø± Decision Tree Model Service

```csharp
[Fact]
public void DecisionTreeModelService_ShouldPredictCorrectly()
{
    // Arrange
    var service = new DecisionTreeModelService();
    var input = new HeartDiseaseData
    {
        Age = 45,
        Sex = 0,
        CP = 2,
        TrestBPS = 120,
        Chol = 220,
        FBS = 0,
        RestECG = 1,
        Thalach = 160,
        Exang = 0,
        Oldpeak = 0.5f,
        Slope = 1,
        CA = 0,
        Thal = 2
    };

    // Act
    var result = service.Predict(input);

    // Assert
    Assert.NotNull(result);
    Assert.InRange(result.Confidence, 0, 100);
}
```

### 4. Ø§Ø®ØªØ¨Ø§Ø± Prediction Service (Ù†Ø¸Ø§Ù… Ensemble)

```csharp
[Fact]
public void PredictionService_ShouldCombineAllModels()
{
    // Arrange
    var knnService = new KNNModelService();
    var naiveBayesService = new NaiveBayesModelService();
    var decisionTreeService = new DecisionTreeModelService();
    var predictionService = new PredictionService(
        knnService, 
        naiveBayesService, 
        decisionTreeService
    );

    var request = new PredictionRequest
    {
        Age = 50,
        Sex = 1,
        CP = 1,
        TrestBPS = 130,
        Chol = 240,
        FBS = 0,
        RestECG = 0,
        Thalach = 150,
        Exang = 0,
        Oldpeak = 1.0f,
        Slope = 1,
        CA = 1,
        Thal = 2
    };

    // Act
    var result = predictionService.PredictHeartDisease(request);

    // Assert
    Assert.NotNull(result);
    Assert.NotNull(result.Ensemble);
    Assert.NotNull(result.KNN);
    Assert.NotNull(result.NaiveBayes);
    Assert.NotNull(result.DecisionTree);
}
```

---

## Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø±

**Ø§Ù„Ù…Ù„Ù:** `Tests/RiskEvaluationTests.cs`

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± 1: ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø®Ø·Ø± Ø§Ù„Ù…Ù†Ø®ÙØ¶

```csharp
[Fact]
public void RiskEvaluation_LowRiskScore_ShouldReturnLowLevel()
{
    // Arrange
    float lowRisk = 0.15f; // 15%

    // Act
    var riskLevel = RiskEvaluator.GetRiskLevel(lowRisk);

    // Assert
    Assert.Equal("low", riskLevel);
}
```

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± 2: ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø®Ø·Ø± Ø§Ù„Ù…ØªÙˆØ³Ø·

```csharp
[Fact]
public void RiskEvaluation_ModerateRiskScore_ShouldReturnModerateLevel()
{
    // Arrange
    float moderateRisk = 0.45f; // 45%

    // Act
    var riskLevel = RiskEvaluator.GetRiskLevel(moderateRisk);

    // Assert
    Assert.Equal("moderate", riskLevel);
}
```

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± 3: ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø®Ø·Ø± Ø§Ù„Ù…Ø±ØªÙØ¹

```csharp
[Fact]
public void RiskEvaluation_HighRiskScore_ShouldReturnHighLevel()
{
    // Arrange
    float highRisk = 0.85f; // 85%

    // Act
    var riskLevel = RiskEvaluator.GetRiskLevel(highRisk);

    // Assert
    Assert.Equal("high", riskLevel);
}
```

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± 4: Ø­Ø¯ÙˆØ¯ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø±

```csharp
[Theory]
[InlineData(0.00f, "low")]
[InlineData(0.30f, "moderate")]
[InlineData(0.60f, "high")]
[InlineData(1.00f, "high")]
public void RiskEvaluation_BoundaryValues_ShouldEvaluateCorrectly(
    float riskScore, 
    string expectedLevel)
{
    // Act
    var riskLevel = RiskEvaluator.GetRiskLevel(riskScore);

    // Assert
    Assert.Equal(expectedLevel, riskLevel);
}
```

---

## Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„Ø©

### Ø­Ø§Ù„Ø© 1: Ù…Ø±ÙŠØ¶ Ø¨Ø®Ø·Ø± Ù…Ù†Ø®ÙØ¶ ğŸŸ¢

**Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
```json
{
  "age": 30,
  "sex": 0,
  "cp": 0,
  "trestBPS": 110,
  "chol": 180,
  "fbs": 0,
  "restECG": 0,
  "thalach": 170,
  "exang": 0,
  "oldpeak": 0.0,
  "slope": 1,
  "ca": 0,
  "thal": 2
}
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**
- Risk Score: 10-25%
- Risk Level: low
- Prediction: false (Ø³Ù„ÙŠÙ…)

**Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚:**
```csharp
[Fact]
public void TestCase1_LowRiskPatient()
{
    var result = PredictHeartDisease(GetTestCase1Data());
    
    Assert.Equal("low", result.Ensemble.RiskLevel);
    Assert.False(result.Ensemble.Prediction);
    Assert.InRange(result.Ensemble.RiskScore, 0.10f, 0.25f);
}
```

### Ø­Ø§Ù„Ø© 2: Ù…Ø±ÙŠØ¶ Ø¨Ø®Ø·Ø± Ù…ØªÙˆØ³Ø· ğŸŸ 

**Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
```json
{
  "age": 50,
  "sex": 1,
  "cp": 1,
  "trestBPS": 130,
  "chol": 240,
  "fbs": 0,
  "restECG": 0,
  "thalach": 150,
  "exang": 0,
  "oldpeak": 1.0,
  "slope": 1,
  "ca": 1,
  "thal": 2
}
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**
- Risk Score: 35-55%
- Risk Level: moderate
- Prediction: Ù…ØªØ¨Ø§ÙŠÙ† (Ù‚Ø¯ ÙŠÙƒÙˆÙ† true Ø£Ùˆ false)

**Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚:**
```csharp
[Fact]
public void TestCase2_ModerateRiskPatient()
{
    var result = PredictHeartDisease(GetTestCase2Data());
    
    Assert.Equal("moderate", result.Ensemble.RiskLevel);
    Assert.InRange(result.Ensemble.RiskScore, 0.35f, 0.55f);
}
```

### Ø­Ø§Ù„Ø© 3: Ù…Ø±ÙŠØ¶ Ø¨Ø®Ø·Ø± Ù…Ø±ØªÙØ¹ ğŸ”´

**Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
```json
{
  "age": 65,
  "sex": 1,
  "cp": 3,
  "trestBPS": 160,
  "chol": 300,
  "fbs": 1,
  "restECG": 2,
  "thalach": 100,
  "exang": 1,
  "oldpeak": 3.0,
  "slope": 2,
  "ca": 3,
  "thal": 3
}
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**
- Risk Score: 70-95%
- Risk Level: high
- Prediction: true (Ù…Ø±ÙŠØ¶)

**Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚:**
```csharp
[Fact]
public void TestCase3_HighRiskPatient()
{
    var result = PredictHeartDisease(GetTestCase3Data());
    
    Assert.Equal("high", result.Ensemble.RiskLevel);
    Assert.True(result.Ensemble.Prediction);
    Assert.InRange(result.Ensemble.RiskScore, 0.70f, 0.95f);
}
```

---

## Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¹Ù…Ø±

```csharp
[Theory]
[InlineData(19)] // Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰
[InlineData(101)] // Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰
public void Validation_InvalidAge_ShouldReturnBadRequest(int age)
{
    // Arrange
    var request = GetValidRequest();
    request.Age = age;

    // Act & Assert
    Assert.Throws<ValidationException>(() => 
        ValidateRequest(request));
}
```

### Ø§Ø®ØªØ¨Ø§Ø± Ø¶ØºØ· Ø§Ù„Ø¯Ù…

```csharp
[Theory]
[InlineData(79)]  // Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰
[InlineData(201)] // Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰
public void Validation_InvalidBloodPressure_ShouldReturnBadRequest(int bp)
{
    // Arrange
    var request = GetValidRequest();
    request.TrestBPS = bp;

    // Act & Assert
    Assert.Throws<ValidationException>(() => 
        ValidateRequest(request));
}
```

### Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒÙˆÙ„ÙŠØ³ØªØ±ÙˆÙ„

```csharp
[Theory]
[InlineData(99)]  // Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰
[InlineData(601)] // Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰
public void Validation_InvalidCholesterol_ShouldReturnBadRequest(int chol)
{
    // Arrange
    var request = GetValidRequest();
    request.Chol = chol;

    // Act & Assert
    Assert.Throws<ValidationException>(() => 
        ValidateRequest(request));
}
```

---

## ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

### ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

```bash
# Ù…Ù† Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
cd HeartDiseaseAPI

# ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
dotnet test

# Output:
# Starting test execution, please wait...
# Passed!  - Failed:     0, Passed:    25, Skipped:     0, Total:    25
```

### ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø­Ø¯Ø¯Ø©

```bash
# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ù…ÙˆØ°Ø¬ KNN ÙÙ‚Ø·
dotnet test --filter "FullyQualifiedName~KNNModelService"

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙÙ‚Ø·
dotnet test --filter "FullyQualifiedName~RiskEvaluation"

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù€ Controller ÙÙ‚Ø·
dotnet test --filter "FullyQualifiedName~PredictionController"
```

### ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø¹ ØªÙØ§ØµÙŠÙ„

```bash
# Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÙØµÙ„Ø©
dotnet test --logger "console;verbosity=detailed"

# Ù…Ø¹ ØªÙ‚Ø±ÙŠØ± HTML
dotnet test --logger "html;LogFileName=TestReport.html"
```

---

## ØªØºØ·ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ (Code Coverage)

### ØªØ«Ø¨ÙŠØª Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØºØ·ÙŠØ©

```bash
dotnet tool install --global coverlet.console
dotnet tool install --global dotnet-reportgenerator-globaltool
```

### Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØºØ·ÙŠØ©

```bash
# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø¹ Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØºØ·ÙŠØ©
dotnet test /p:CollectCoverage=true /p:CoverletOutputFormat=opencover

# Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± HTML
reportgenerator -reports:coverage.opencover.xml -targetdir:coverage -reporttypes:Html

# ÙØªØ­ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
start coverage/index.html
```

### Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„ØªØºØ·ÙŠØ©

| Ø§Ù„Ù…ÙƒÙˆÙ† | Ø§Ù„ØªØºØ·ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© |
|--------|-------------------|
| Services | > 90% |
| Controllers | > 85% |
| Models | > 95% |
| Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ | > 85% |

---

## Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙŠØ¯ÙˆÙŠ Ø¹Ø¨Ø± Swagger

### Ø§Ù„Ø®Ø·ÙˆØ§Øª:

1. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:
```bash
dotnet run
```

2. ÙØªØ­ Swagger UI:
```
http://localhost:5000/swagger
```

3. Ø§Ø®ØªØ¨Ø§Ø± Endpoint Ø§Ù„ØªÙ†Ø¨Ø¤:
   - Ø§ÙØªØ­ `POST /api/prediction/predict`
   - Ø§Ø¶ØºØ· "Try it out"
   - Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
   - Ø§Ø¶ØºØ· "Execute"
   - Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø©

### Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø§Ù‡Ø²Ø©:

**Ø­Ø§Ù„Ø© 1 - Ø®Ø·Ø± Ù…Ù†Ø®ÙØ¶:**
```json
{"age":30,"sex":0,"cp":0,"trestBPS":110,"chol":180,"fbs":0,"restECG":0,"thalach":170,"exang":0,"oldpeak":0.0,"slope":1,"ca":0,"thal":2}
```

**Ø­Ø§Ù„Ø© 2 - Ø®Ø·Ø± Ù…ØªÙˆØ³Ø·:**
```json
{"age":50,"sex":1,"cp":1,"trestBPS":130,"chol":240,"fbs":0,"restECG":0,"thalach":150,"exang":0,"oldpeak":1.0,"slope":1,"ca":1,"thal":2}
```

**Ø­Ø§Ù„Ø© 3 - Ø®Ø·Ø± Ù…Ø±ØªÙØ¹:**
```json
{"age":65,"sex":1,"cp":3,"trestBPS":160,"chol":300,"fbs":1,"restECG":2,"thalach":100,"exang":1,"oldpeak":3.0,"slope":2,"ca":3,"thal":3}
```

---

## Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø¨Ø± Postman

### Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©:

1. Ø§ÙØªØ­ Postman
2. File > Import
3. Ø§Ø³ØªÙˆØ±Ø¯ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† [API_DOCUMENTATION.md](API_DOCUMENTATION.md)

### Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ÙÙŠ Postman:

```javascript
// ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Tests Ù„ÙƒÙ„ Ø·Ù„Ø¨

// Ø§Ø®ØªØ¨Ø§Ø± Ø±Ù…Ø² Ø§Ù„Ø­Ø§Ù„Ø©
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

// Ø§Ø®ØªØ¨Ø§Ø± ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
pm.test("Response time is less than 500ms", function () {
    pm.expect(pm.response.responseTime).to.be.below(500);
});

// Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ù†ÙŠØ©
pm.test("Response has correct structure", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData).to.have.property('ensemble');
    pm.expect(jsonData).to.have.property('knn');
    pm.expect(jsonData).to.have.property('naiveBayes');
    pm.expect(jsonData).to.have.property('decisionTree');
});

// Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù‚ÙŠÙ…
pm.test("Risk score is between 0 and 1", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData.ensemble.riskScore).to.be.at.least(0);
    pm.expect(jsonData.ensemble.riskScore).to.be.at.most(1);
});
```

---

## Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø¨Ø± cURL

### Ø­Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹Ø©:

```bash
curl -X POST "http://localhost:5000/api/prediction/predict" \
  -H "Content-Type: application/json" \
  -d '{
    "age": 50,
    "sex": 1,
    "cp": 1,
    "trestBPS": 130,
    "chol": 240,
    "fbs": 0,
    "restECG": 0,
    "thalach": 150,
    "exang": 0,
    "oldpeak": 1.0,
    "slope": 1,
    "ca": 1,
    "thal": 2
  }'
```

---

## Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

- âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙ†Ø¬Ø­ (Pass Rate: 100%)
- âœ… ÙˆÙ‚Øª Ø§Ù„ØªÙ†ÙÙŠØ° < 5 Ø«ÙˆØ§Ù†Ù Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
- âœ… ØªØºØ·ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ > 85%
- âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ØªØ¬Ø§Ù‡Ù„Ø© (Skipped: 0)

### Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:

| Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ | ÙˆÙ‚Øª Ø§Ù„ØªÙ†ÙÙŠØ° |
|---------|-------------|
| KNN | < 50ms |
| Naive Bayes | < 30ms |
| Decision Tree | < 20ms |
| Ensemble | < 100ms |

---

## Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙØ´Ù„ Ø¨Ø´ÙƒÙ„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ

**Ø§Ù„Ø­Ù„:**
- ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù `heart_balanced.csv`
- ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù„Ù
- Ø£Ø¹Ø¯ ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¨Ø·ÙŠØ¦Ø© Ø¬Ø¯Ø§Ù‹

**Ø§Ù„Ø­Ù„:**
- Ø§Ø³ØªØ®Ø¯Ù… Singleton Ù„Ù„Ù†Ù…Ø§Ø°Ø¬
- Ù‚Ù„Ù„ Ø­Ø¬Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
- Ø´ØºÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ:
```bash
dotnet test --parallel
```

---

## Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

- **GitHub Issues:** [Ø§ÙØªØ­ Issue Ø¬Ø¯ÙŠØ¯](https://github.com/HazemAlhajIhmid/CardioGuard-Backend-API/issues)
- **Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:** Hazem_82763@svuonline.org

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 8 ÙØ¨Ø±Ø§ÙŠØ± 2026  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0.0
